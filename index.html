<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Modern ve ÅŸÄ±k tasarÄ±mlÄ± web tabanlÄ± satranÃ§ oyunu">
    <title>SatranÃ§ Oyunu</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Start Menu -->
        <div class="start-menu" id="start-menu">
            <div class="menu-content">
                <div class="menu-header">
                    <h1>â™” SatranÃ§ â™š</h1>
                    <p class="menu-subtitle">Klasik strateji oyunu</p>
                </div>

                <div class="mode-selection">
                    <h2>Oyun Modu SeÃ§in</h2>

                    <button class="mode-btn" id="two-player-btn">
                        <div class="mode-icon">ğŸ‘¥</div>
                        <div class="mode-info">
                            <span class="mode-title">2 KiÅŸilik</span>
                            <span class="mode-desc">ArkadaÅŸÄ±nÄ±zla oynayÄ±n</span>
                        </div>
                    </button>

                    <button class="mode-btn" id="vs-computer-btn">
                        <div class="mode-icon">ğŸ¤–</div>
                        <div class="mode-info">
                            <span class="mode-title">Bilgisayara KarÅŸÄ±</span>
                            <span class="mode-desc">Yapay zeka ile mÃ¼cadele</span>
                        </div>
                    </button>

                    <button class="mode-btn" id="online-btn">
                        <div class="mode-icon">ğŸŒ</div>
                        <div class="mode-info">
                            <span class="mode-title">Online</span>
                            <span class="mode-desc">Uzaktaki arkadaÅŸÄ±nla</span>
                        </div>
                    </button>

                    <button class="mode-btn" id="public-lobby-btn">
                        <div class="mode-icon">ğŸ </div>
                        <div class="mode-info">
                            <span class="mode-title">Herkese AÃ§Ä±k Lobi</span>
                            <span class="mode-desc">AÃ§Ä±k odalara katÄ±l</span>
                        </div>
                    </button>
                </div>

                <div class="online-lobby hidden" id="online-lobby">
                    <h2>Online Lobi</h2>
                    <div class="lobby-controls">
                        <button class="action-btn" id="create-room-btn">
                            <span class="btn-icon">â•</span> Oda OluÅŸtur
                        </button>

                        <div class="separator">YA DA</div>

                        <div class="time-selection">
                            <p>SÃ¼re SeÃ§imi (VarsayÄ±lan: 2dk)</p>
                            <div class="time-options">
                                <button class="time-btn selected" data-time="2">2 dk</button>
                                <button class="time-btn" data-time="3">3 dk</button>
                                <button class="time-btn" data-time="4">4 dk</button>
                                <button class="time-btn" data-time="5">5 dk</button>
                                <button class="time-btn" data-time="0" title="SÃ¼resiz">âˆ</button>
                            </div>
                        </div>

                        <div class="join-room-section">
                            <input type="text" id="room-input" placeholder="Oda Kodu Girin" maxlength="6">
                            <button class="action-btn" id="join-room-btn">KatÄ±l</button>
                        </div>

                        <div class="room-status hidden" id="room-wait-status">
                            <p>Oda Kodu: <strong id="display-room-id">---</strong></p>
                            <p class="pulse-text">Rakip bekleniyor...</p>
                        </div>
                        <button class="back-btn" id="back-to-modes-online" style="margin-top: 20px;">
                            <span>â† Geri</span>
                        </button>
                    </div>
                </div>

                <!-- Public Lobby -->
                <div class="public-lobby hidden" id="public-lobby">
                    <div class="lobby-header-row">
                        <h2>ğŸ  Herkese AÃ§Ä±k Lobi</h2>
                        <button class="icon-btn-small" id="back-to-modes-public" title="Geri">
                            <span>â†©</span>
                        </button>
                    </div>

                    <div class="lobby-split-container">
                        <!-- Left: Rooms -->
                        <div class="lobby-column rooms-column">
                            <h3>AÃ§Ä±k Odalar</h3>
                            <div class="public-rooms-grid" id="public-rooms-grid">
                                <!-- Rooms will be rendered by JS -->
                            </div>
                        </div>

                        <!-- Right: Players -->
                        <div class="lobby-column players-column">
                            <h3>Online Oyuncular <span id="lobby-online-count" class="count-badge">0</span></h3>
                            <div class="lobby-players-list" id="lobby-players-list">
                                <div class="empty-list-msg">Kimse yok...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="difficulty-selection hidden" id="difficulty-selection">
                    <h2>Zorluk Seviyesi</h2>
                    <div class="difficulty-buttons">
                        <button class="difficulty-btn" data-level="1">
                            <span class="diff-level">1</span>
                            <span class="diff-name">Ã‡ok Kolay</span>
                            <div class="diff-stars">â­</div>
                        </button>
                        <button class="difficulty-btn" data-level="2">
                            <span class="diff-level">2</span>
                            <span class="diff-name">Kolay</span>
                            <div class="diff-stars">â­â­</div>
                        </button>
                        <button class="difficulty-btn" data-level="3">
                            <span class="diff-level">3</span>
                            <span class="diff-name">Orta</span>
                            <div class="diff-stars">â­â­â­</div>
                        </button>
                        <button class="difficulty-btn" data-level="4">
                            <span class="diff-level">4</span>
                            <span class="diff-name">Zor</span>
                            <div class="diff-stars">â­â­â­â­</div>
                        </button>
                        <button class="difficulty-btn" data-level="5">
                            <span class="diff-level">5</span>
                            <span class="diff-name">Ã‡ok Zor</span>
                            <div class="diff-stars">â­â­â­â­â­</div>
                        </button>
                    </div>
                    <button class="back-btn" id="back-to-modes">
                        <span>â† Geri</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div class="game-screen hidden" id="game-screen">
            <header class="game-header">
                <h1>â™” SatranÃ§ Oyunu â™š</h1>
                <p class="subtitle" id="game-mode-label">2 KiÅŸilik Mod</p>
            </header>

            <main class="game-container">
                <div class="player-panel white-panel">
                    <div class="player-avatar">â™”</div>
                    <div class="player-info">
                        <span class="player-name" id="white-name">Beyaz</span>
                        <div class="timer hidden" id="white-timer">01:00</div>
                        <div class="captured-pieces" id="white-captured"></div>
                    </div>
                    <div class="turn-indicator" id="white-turn">SÄ±ra Sizde</div>
                </div>

                <div class="board-wrapper">
                    <div class="board-glow"></div>
                    <div class="chess-board" id="chess-board"></div>
                </div>

                <div class="player-panel black-panel">
                    <div class="player-avatar">â™š</div>
                    <div class="player-info">
                        <span class="player-name" id="black-name">Siyah</span>
                        <div class="timer hidden" id="black-timer">01:00</div>
                        <div class="captured-pieces" id="black-captured"></div>
                    </div>
                    <div class="turn-indicator hidden" id="black-turn">SÄ±ra Sizde</div>
                </div>
            </main>

            <div class="game-controls">
                <button class="control-btn" id="main-menu" title="Ana MenÃ¼">
                    <span class="btn-icon">ğŸ </span>
                </button>
                <button class="control-btn" id="new-game" title="Yeni Oyun">
                    <span class="btn-icon">ğŸ”„</span>
                </button>
                <button class="control-btn hidden tea-control-btn" id="tea-btn" title="Ã‡ay Ismarla">
                    <span class="btn-icon">â˜•</span>
                </button>
                <button class="control-btn hidden" id="cheat-btn" title="Hile Yap">
                    <span class="btn-icon">ğŸ¤–</span>
                </button>
                <button class="control-btn hidden mic-btn" id="mic-btn" title="Sesli Sohbet">
                    <span class="btn-icon">ğŸ¤</span>
                </button>
                <button class="control-btn hidden invite-player-btn" id="invite-player-btn" title="Oyuncu Davet Et">
                    <span class="btn-icon">ğŸ‘¥</span>
                </button>

            </div>

            <div class="game-status" id="game-status"></div>
            <div class="my-username-badge hidden" id="my-username-badge">
                ğŸ‘¤ <span id="game-username-label"></span>
            </div>
        </div>

        <!-- Modal for game end -->
        <div class="modal-overlay hidden" id="modal">
            <div class="modal-content modal-large">
                <div class="modal-icon" id="modal-icon">ğŸ‘‘</div>
                <h2 id="modal-title">Oyun Bitti!</h2>
                <p id="modal-message"></p>

                <!-- Final Board State -->
                <div class="final-game-section">
                    <h3>ğŸ“‹ Son Oyun Durumu</h3>
                    <div class="final-board-container">
                        <div class="final-board" id="final-board"></div>
                    </div>
                </div>

                <div class="modal-buttons">
                    <button class="modal-btn" id="modal-new-game">Tekrar Oyna</button>
                    <button class="modal-btn secondary" id="modal-main-menu">Ana MenÃ¼</button>
                </div>
            </div>
        </div>
    </div>
    <footer class="dev-footer">
        Â© By Developer Tunahan
    </footer>
    </div>

    <div id="tea-animation" class="tea-animation hidden">
        <div class="tea-icon">â˜•</div>
        <div class="tea-text">Afiyet Olsun!</div>
    </div>

    <!-- Username Setup Modal -->
    <div class="username-modal hidden" id="username-modal">
        <div class="username-modal-content">
            <div class="username-icon">ğŸ‘¤</div>
            <h3>KullanÄ±cÄ± AdÄ±nÄ±zÄ± Belirleyin</h3>
            <input type="text" id="username-input" placeholder="KullanÄ±cÄ± adÄ±..." maxlength="15" />
            <button class="username-save-btn" id="save-username-btn">Kaydet</button>
        </div>
    </div>

    <!-- Invite Modal -->
    <div class="invite-modal hidden" id="invite-modal">
        <div class="invite-content">
            <div class="invite-icon">ğŸ®</div>
            <h3>Oyun Daveti!</h3>
            <p><strong id="invite-from-name">Oyuncu</strong> sizi oyuna davet etti</p>
            <div class="invite-buttons">
                <button class="invite-btn accept" id="accept-invite-btn">âœ“ Kabul Et</button>
                <button class="invite-btn reject" id="reject-invite-btn">âœ— Reddet</button>
            </div>
        </div>
    </div>

    <!-- Players List Modal (for in-game invitations) -->
    <div class="players-modal hidden" id="players-modal">
        <div class="players-modal-content">
            <div class="players-modal-header">
                <h3>ğŸ‘¥ Online Oyuncular</h3>
                <button class="close-modal-btn" id="close-players-modal">âœ•</button>
            </div>
            <div class="online-players-list" id="online-players-list">
                <!-- Players will be rendered by JS -->
            </div>
        </div>
    </div>

    <canvas id="fireworks-canvas"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script src="pieces.js"></script>
    <script src="sounds.js"></script>
    <script src="chess.js"></script>
</body>

</html>